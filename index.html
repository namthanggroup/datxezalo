<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Đặt xe Taxi điện Nam Thắng</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <div class="max-w-md mx-auto mt-6 bg-white shadow-lg rounded-xl p-6">
    <!-- Tiêu đề -->
    <h1 class="text-2xl font-bold text-center text-green-700 mb-4 flex items-center justify-center">
      🚖 Đặt xe Taxi điện Nam Thắng
    </h1>

    <!-- Thông tin liên hệ -->
    <div class="mb-4">
      <h2 class="font-semibold text-red-600 mb-2 flex items-center">📞 Thông tin liên hệ</h2>
      <input id="phone" type="tel" placeholder="Số điện thoại"
        class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500"/>
    </div>

    <!-- Địa chỉ -->
    <div class="mb-4">
      <h2 class="font-semibold text-red-600 mb-2 flex items-center">📍 Địa chỉ</h2>
      
      <select id="tinh" class="w-full p-2 border rounded mb-2">
        <option value="">-- Chọn Tỉnh/Thành --</option>
      </select>

      <select id="quan" class="w-full p-2 border rounded mb-2">
        <option value="">-- Chọn Quận/Huyện --</option>
      </select>

      <select id="phuong" class="w-full p-2 border rounded mb-2">
        <option value="">-- Chọn Phường/Xã --</option>
      </select>

      <input id="diachi" type="text" placeholder="Địa chỉ chi tiết (số nhà, đường)"
        class="w-full p-2 border rounded mb-2"/>

      <button id="btnGPS" type="button" class="px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700">
        📍 Lấy GPS
      </button>
      <p id="gpsStatus" class="text-sm text-gray-600 mt-1"></p>
    </div>

    <!-- Thông tin phương tiện -->
    <div class="mb-4">
      <h2 class="font-semibold text-blue-600 mb-2 flex items-center">🚙 Thông tin phương tiện</h2>
      <div class="flex items-center mb-2">
        <span class="mr-2">Số lượng xe</span>
        <button type="button" id="decrease" class="px-2 py-1 bg-gray-200 rounded">-</button>
        <input id="soluong" type="number" value="1" min="1" class="w-16 text-center border mx-2 rounded"/>
        <button type="button" id="increase" class="px-2 py-1 bg-gray-200 rounded">+</button>
      </div>
      <select id="loaixe" class="w-full p-2 border rounded">
        <option value="">-- Chọn loại xe --</option>
      </select>
    </div>

    <!-- Ghi chú -->
    <div class="mb-4">
      <h2 class="font-semibold text-yellow-600 mb-2">📝 Ghi chú</h2>
      <textarea id="ghichu" placeholder="Ghi chú thêm (nếu có)"
        class="w-full p-2 border rounded"></textarea>
    </div>

    <!-- Gửi yêu cầu -->
    <button id="submitBtn" class="w-full bg-green-600 text-white py-2 rounded-lg shadow hover:bg-green-700">
      🚀 Gửi yêu cầu
    </button>
  </div>

  <script>
    // Load địa chỉ từ JSON
    fetch("locations.json")
      .then(res => res.json())
      .then(data => {
        const tinhSelect = document.getElementById("tinh");
        const quanSelect = document.getElementById("quan");
        const phuongSelect = document.getElementById("phuong");

        // Load tỉnh
        Object.keys(data).forEach(tinh => {
          tinhSelect.innerHTML += `<option value="${tinh}">${tinh}</option>`;
        });

        // Khi chọn tỉnh
        tinhSelect.addEventListener("change", () => {
          quanSelect.innerHTML = `<option value="">-- Chọn Quận/Huyện --</option>`;
          phuongSelect.innerHTML = `<option value="">-- Chọn Phường/Xã --</option>`;
          if (tinhSelect.value && data[tinhSelect.value]) {
            Object.keys(data[tinhSelect.value]).forEach(quan => {
              quanSelect.innerHTML += `<option value="${quan}">${quan}</option>`;
            });
          }
        });

        // Khi chọn quận
        quanSelect.addEventListener("change", () => {
          phuongSelect.innerHTML = `<option value="">-- Chọn Phường/Xã --</option>`;
          if (quanSelect.value && data[tinhSelect.value][quanSelect.value]) {
            data[tinhSelect.value][quanSelect.value].forEach(px => {
              phuongSelect.innerHTML += `<option value="${px}">${px}</option>`;
            });
          }
        });
      });

    // Load loại xe từ JSON
    fetch("cau_hinh_xe.json")
      .then(res => res.json())
      .then(data => {
        const loaixeSelect = document.getElementById("loaixe");
        data.forEach(xe => {
          loaixeSelect.innerHTML += `<option value="${xe.ten}">${xe.ten}</option>`;
        });
      });

    // Nút tăng giảm số lượng xe
    document.getElementById("increase").addEventListener("click", () => {
      const input = document.getElementById("soluong");
      input.value = parseInt(input.value) + 1;
    });
    document.getElementById("decrease").addEventListener("click", () => {
      const input = document.getElementById("soluong");
      if (parseInt(input.value) > 1) input.value = parseInt(input.value) - 1;
    });

    // Lấy GPS
    document.getElementById("btnGPS").addEventListener("click", () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const { latitude, longitude } = pos.coords;
            document.getElementById("gpsStatus").innerText = 
              `Đã lấy tọa độ: ${latitude}, ${longitude}`;
          },
          () => {
            document.getElementById("gpsStatus").innerText = "Không thể lấy GPS!";
          }
        );
      } else {
        document.getElementById("gpsStatus").innerText = "Trình duyệt không hỗ trợ GPS.";
      }
    });

    // Submit (demo)
    document.getElementById("submitBtn").addEventListener("click", () => {
      alert("Yêu cầu đã được gửi!");
    });
  </script>
</body>
</html>
